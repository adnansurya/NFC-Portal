<!doctype html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <title> Input | NFC Parking </title>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-database.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#config-web-app -->

    <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
    apiKey: "AIzaSyCx6AdfG2fje0BXshS4koOw02GYTxH9ots",
    authDomain: "myclasswebsite-3eca2.firebaseapp.com",
    databaseURL: "https://myclasswebsite-3eca2.firebaseio.com",
    projectId: "myclasswebsite-3eca2",
    storageBucket: "myclasswebsite-3eca2.appspot.com",
    messagingSenderId: "779841356082",
    appId: "1:779841356082:web:e8f8e288c0feeb1025572b",
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    </script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>
<body class="bg-info">

  <div class="container">

    <div class="row justify-content-center">
      <div class="col-xl-12 col-lg-12 col-md-9">
        <div class="card o-hidden border-0 shadow-lg my-5">
          <div class="card-body p-0">
            <!-- Nested Row within Card Body -->
            <div class="row justify-content-center">
              <div class="col-lg-8">
                <div class="p-5">
                  <div class="text-center">
                    <h1 class="h1 text-gray-800 mb-4"> Input Data </h1>
                  </div>
                  <hr>
                  <form class="user">
                    <div class="form-group">
                      <label for="idNFC" class="font-weight-bold mb-3"> idNFC </label>
                      <input name="idNFC" id="idNFC" type="text" class="form-control form-control-user" placeholder="Nama">
                    </div>
                    <div class="form-group">
                      <label for="namaOrang" class="font-weight-bold mb-3"> Nama orang </label>
                      <input name="namaOrang" id="namaOrang" type="text" class="form-control form-control-user" placeholder="Nama">
                    </div>
                    <div class="form-group">
                      <label for="umur" class="font-weight-bold mb-3"> Umur </label>
                      <input type="text" name="umur" id="umur" class="form-control form-control-user" placeholder="Tempat Lahir">
                    </div>
                    <div class="form-group">
                      <label for="tpLahir" class="font-weight-bold mb-3"> Tempat Lahir </label>
                      <input type="text" name="tpLahir" id="tpLahir" class="form-control form-control-user" placeholder="Tempat Lahir">
                    </div>
                    <div class="form-group">
                      <h5 class="font-weight-bold mb-3"> Tanggal Lahir </h5>
                      <input type="date" class="form-control form-control-user" name="tgLahir" id="tgLahir" placeholder="Tanggal Lahir">
                    </div>
                    <div class="form-group">
                      <h5 class="font-weight-bold mb-3"> Jenis Kelamin </h5>
                      <input type="text" class="form-control form-control-user" name="jKel" id="jKel" placeholder="Jenis Kelamin">
                    </div>
                    <div class="form-group">
                      <h5 class="font-weight-bold mb-3"> Alamat </h5>
                      <input type="text" class="form-control form-control-user" name="alamat" id="alamat" placeholder="alamat">
                    </div>
                    <div class="form-group">
                      <h5 class="font-weight-bold mb-3"> RT </h5>
                      <input type="text" class="form-control form-control-user" name="rt" id="rt" placeholder="RT">
                    </div>
                    <div class="form-group">
                      <h5 class="font-weight-bold mb-3"> RW </h5>
                      <input type="text" class="form-control form-control-user" name="rw" id="rw" placeholder="RW">
                    </div>
                    <div class="form-group">
                      <h5 class="font-weight-bold mb-3"> Kelurahan / Desa </h5>
                      <input type="text" class="form-control form-control-user" name="kelDes" id="kelDes" placeholder="Kel / Desa">
                    </div>
                    <div class="form-group">
                      <h5 class="font-weight-bold mb-3"> kecamatan </h5>
                      <input type="text" class="form-control form-control-user" name="kecamatan" id="kecamatan" placeholder="kecamatan">
                    </div>
                    <div class="form-group">
                      <h5 class="font-weight-bold mb-3"> Agama </h5>
                      <input type="text" class="form-control form-control-user" name="agama" id="agama" placeholder="Agama">
                    </div>
                    <div class="form-group">
                      <h5 class="font-weight-bold mb-3"> Status Perkawinan </h5>
                      <input type="text" class="form-control form-control-user" name="status" id="status" placeholder="Status Perkawinan">
                    </div>
                    <div class="form-group">
                      <label for="profesi" class="font-weight-bold mb-3"> Profesi </label>
                      <input type="text" name="profesi" id="profesi" class="form-control form-control-user" placeholder="Pekerjaan">
                    </div>
                    <div class="form-group">
                      <h5 class="font-weight-bold mb-3"> Kewarganegaraan </h5>
                      <input type="text" class="form-control form-control-user" name="kNegara" id="kNegara" placeholder="Kewarganegaraan">
                    </div>
                    <div class="form-group">
                      <h5 class="font-weight-bold mb-3"> Jenis Identitas </h5>
                      <select class="form-control" onchange="pilihJenis()" id="identitas">
                        <option name="home" id="home" value="home"> Pemilik Rumah </option>
                        <option name="visitor" id="visitor" value="visitor"> Tamu </option>
                      </select>
                    </div>
                    <div class="form-group" id="overlay" style="display: none;">
                      <h5 class="font-weight-bold mb-3"> Kenalan </h5>
                      <input type="search" class="form-control form-control-user" name="kenalan" id="kenalan" placeholder="Kenalan">
                    </div>
                    <button id="submitBtn" class="btn btn-primary btn-user btn-block">
                      Kirim
                    </button>
                  </form>
                  <hr>
                  <div class="text-center">
                    <p class="small text-primary"> Make Sure u have input the right data! </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

  </div>

  <!-- Firebase Database Javascript -->
  <script>
    $('#submitBtn').click(function(){

        let idNFC, namaOrang, umurOrang, tpLahir, tgLahir, jKel, alamat, rt, rw, kelDes, kecamatan, agama, status, profesiOrang, kNegara, identitas, home, visitor, kenalan;
        idNFC = $('#idNFC').val();
        namaOrang = $('#namaOrang').val(); 
        umurOrang = $('#umur').val();
        tpLahir = $('#tpLahir').val();
        tgLahir = $('#tgLahir').val();
        jKel = $('#jKel').val();
        alamat = $('#alamat').val();
        rt = $('#rt').val();
        rw = $('#rw').val();
        kelDes = $('#kelDes').val();
        kecamatan = $('#kecamatan').val();
        agama = $('#agama').val();
        status = $('#status').val();
        profesiOrang = $('#profesi').val();
        kNegara = $('#kNegara').val();
        identitas = $('#identitas').val();
        kenalan = $('#kenalan').val();
        
        db.ref('Users/' + idNFC).set({
          // Sebelah Kiri variabel buat file Firebase dan disebelah kanan variabel javascript(yang di atas)
          // NOTE : JANGAN DI HAPUS WOI(MASIH AWAM)
            nama : namaOrang,
            umur : umurOrang,
            tpLahir : tpLahir,
            tgLahir : tgLahir,
            jKel : jKel,
            alamat : alamat,
            rt : rt,
            rw : rw,
            kelDes : kelDes,
            kecamatan : kecamatan,
            agama : agama,
            status : status,
            profesi : profesiOrang,
            kNegara : kNegara,
            identitas : identitas,
            kenalan : kenalan

        }, function(error){
            if (error) {
                alert(error);
            } else {
                $('#idNFC').val('');
                $('#namaOrang').val('');
                $('#umur').val('');
                $('#tpLahir').val('');
                $('#tgLahir').val('');
                $('#jKel').val('');
                $('#alamat').val('');
                $('#RT').val('');
                $('#RW').val('');
                $('#kelDes').val('');
                $('#kecamatan').val('');
                $('#agama').val('');
                $('#status').val('');
                $('#profesi').val('');
                $('#kNegara').val('');
                $('#identitas').val('');
                $('#kenalan').val('');
                location.href = "inputData.html";
                // location.href = "index2.html"; //pindah ke index.html
            }
        });

    });
</script>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="script.js"></script>
</body>
</html>